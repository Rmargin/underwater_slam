# Underwater_SLAM	

A ROS package to accomplish algorithm related to SLAM, based on [UWSim](http://www.irs.uji.es/uwsim/).

## Getting Started

Some basic instructions.

Launch UWSim node.

```shell
rosrun uwsim uwsim --configfile ~/catkin_ws/src/UnderwaterSlam/config/dredging.xml 
```

<img src="image/uwsim.png" width="600">



## Files Organization

**config**

configure files used for UWSim.

**src**

source files 

**srv**

ROS service files



## ROS Topic 

**/dataNavigator** 

Message to navigate the ship.

**/g500/dvl**

DVL message for ship.

**/g500/imu**

IMU message for ship.

**/PointCloudConveyNow**

Point cloud generated by ship.



## ROS Services

**PointDetection** 

Get point cloud which contains only key points.

**RequireControl**

Get quaternion and linear velocity for ship.



## ROS Node 

**laser_convey_now**

Generate point cloud for ship.

<img src="image/rviz.png" width="600">

**save_pcl**

Save point cloud to local files.

**process**

Main loop for SLAM.



## EKF_formula

###initialization

$$
\mu_{0}  = \begin{pmatrix} 
0\\
0\\
0\end{pmatrix} \\
\Sigma_0 = \begin{pmatrix}
0 & 0 & 0 \\
0 & 0 & 0 \\
0 & 0 & 0 \end{pmatrix} \\
N_0 = 0 \\
u_t = \begin{pmatrix}
v_x  \times \Delta t \\
v_y  \times \Delta t \\ 
\theta_t - \theta_{t-1} \end{pmatrix} \\
z_t = \begin{pmatrix}
x\\
y\\
s
\end{pmatrix}
$$

###Algorithm begin 

$$
N_t = N_{t-1} \\
F_x = \begin{pmatrix}
1 & 0 & 0 & 0...0 \\
0 & 1 & 0 & 0...0 \\
0 & 0 & 1 & 0...0 
\end{pmatrix}
$$

